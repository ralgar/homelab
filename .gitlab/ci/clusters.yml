---
kube-linter:
  stage: validate
  image:
    name: docker.io/stackrox/kube-linter:v0.7.4-alpine
    entrypoint: [""]
  rules:
    - if: $CI_PIPELINE_SOURCE == "merge_request_event"
      changes:
        - .gitlab/ci/clusters.yml
        - .kube-linter.yml
        - cluster/**/*
  script:
    - /kube-linter lint cluster
